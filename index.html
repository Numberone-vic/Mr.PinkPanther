<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AKA 1908 â€” Maze of Excellence</title>
<style>
  body {
    background-color: #000;
    color: #fff;
    font-family: "Poppins", sans-serif;
    text-align: center;
    margin: 0;
    overflow: hidden;
  }

  canvas {
    display: block;
    margin: 0 auto;
    background: #111;
  }

  #ui {
    position: absolute;
    top: 10px;
    width: 100%;
    text-align: center;
    font-size: 20px;
  }

  .menu, .end {
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.9);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  button {
    padding: 10px 20px;
    background: #ff69b4;
    border: none;
    color: #fff;
    font-size: 18px;
    border-radius: 10px;
    cursor: pointer;
  }

  button:hover {
    background: #ff8dc1;
  }
</style>
</head>
<body>
<div id="ui"><span id="pearlsCount">Symbols: 0 / 0</span></div>
<div class="menu" id="menuScreen">
  <h1>AKA 1908: Maze of Excellence</h1>
  <button id="startGameBtn">Start Journey</button>
</div>
<div class="end" id="endScreen" style="display:none;">
  <h1>ðŸ’— Youâ€™ve embodied the 5 Pearls of Excellence! ðŸ’š</h1>
  <p>Scholarship â€¢ Sisterhood â€¢ Leadership â€¢ Social Justice â€¢ Service to All Mankind</p>
</div>

<canvas id="gameCanvas" width="900" height="600"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const pearlsCount = document.getElementById('pearlsCount');
const menuScreen = document.getElementById('menuScreen');
const endScreen = document.getElementById('endScreen');
const startGameBtn = document.getElementById('startGameBtn');

const TILE = 25;
const SPEED = 3;
let currentLevel = 0;
let keys = {};

const LEVELS = [
  [
"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
"X S     X      E          E       X   X",
"X XXXX  X XXXX XXXXX   XXXX  XXXX X X X",
"X X             X      X    X   X   X",
"X XXXX X XXXX X XXXXX XXXX  X XXXX X X",
"X    E X    E                  C X X",
"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
  ],
  [
"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
"X S  X   E    XXXX   E      XXXX    X",
"X    X XXXX  X    X  XXXX  X    X  X",
"X E  X X  X  X E  X  X  X  X E  X  X",
"X    X X  X  XXXX X  X  X  X    X  X",
"X XXXX X  X      X      X  X    C  X",
"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
  ],
  [
"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
"X S      XXXX       E       XXXX    X",
"X XXXX   X  X  XXXXXX  X  X  X  X   X",
"X X  X   X  X    E    X  X  X  X   X",
"X X  X   X  X  XXXXXX X  X  X  X   X",
"X    X      E       X      X       X",
"X    XXXX            XXXX       C  X",
"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
  ],
  [
"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
"X S   XXXXXXXXX   P  X  P  XXXXXXXXX X",
"X     X       X      X      X       X",
"X  E  X   E   X  E   X   E  X   E   X",
"X     X       X      X      X       X",
"X XXXXX XXXXX XXXXXXXXXXXXXX XXXXXXXX",
"X        P             E         C  X",
"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
  ],
  [
"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
"X S     X   X   X     X     X   X   X",
"X   X   X E X E X  E  X  E  X E X E X",
"X   X   X   X   X     X     X   X   X",
"X   X   XXXXXXX   XXXXXXX  XXXXX   X",
"X   X               E            X  X",
"X   XXXXX  XXXX  XXXX  XXXX  XXXX   X",
"X        X      C            E      X",
"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
  ]
];

let game = {};

function loadLevel(index) {
  const level = LEVELS[index];
  game = {
    map: level,
    player: { x: 0, y: 0, size: TILE - 6 },
    walls: [],
    symbols: [],
    collected: 0,
    totalSymbols: 0,
    crown: null,
    particles: [],
  };

  for (let y = 0; y < level.length; y++) {
    for (let x = 0; x < level[y].length; x++) {
      const tile = level[y][x];
      const px = x * TILE;
      const py = y * TILE;

      if (tile === 'X') game.walls.push({ x: px, y: py });
      else if (tile === 'S') { game.player.x = px; game.player.y = py; }
      else if (tile === 'E' || tile === 'P') {
        game.symbols.push({ x: px + TILE/2, y: py + TILE/2, r: 7 });
      } else if (tile === 'C') {
        game.crown = { x: px, y: py, w: TILE, h: TILE };
      }
    }
  }
  game.totalSymbols = game.symbols.length;
  pearlsCount.textContent = `Symbols: 0 / ${game.totalSymbols}`;
}

function rectCollide(a, b) {
  return a.x < b.x + TILE && a.x + a.size > b.x && a.y < b.y + TILE && a.y + a.size > b.y;
}

function movePlayer() {
  const p = game.player;
  let dx = 0, dy = 0;
  if (keys['ArrowUp'] || keys['w']) dy -= SPEED;
  if (keys['ArrowDown'] || keys['s']) dy += SPEED;
  if (keys['ArrowLeft'] || keys['a']) dx -= SPEED;
  if (keys['ArrowRight'] || keys['d']) dx += SPEED;

  const newX = p.x + dx;
  const newY = p.y + dy;
  const test = { x: newX, y: newY, size: p.size };
  let blocked = false;
  for (const wall of game.walls) if (rectCollide(test, wall)) blocked = true;

  if (!blocked) { p.x = newX; p.y = newY; }
}

function update() {
  movePlayer();

  // Collect symbols
  for (let i = game.symbols.length - 1; i >= 0; i--) {
    const s = game.symbols[i];
    const dist = Math.hypot(game.player.x + game.player.size/2 - s.x, game.player.y + game.player.size/2 - s.y);
    if (dist < s.r + game.player.size / 2) {
      game.symbols.splice(i, 1);
      game.collected++;
      pearlsCount.textContent = `Symbols: ${game.collected} / ${game.totalSymbols}`;
    }
  }

  // Check crown
  if (game.crown && game.collected === game.totalSymbols) {
    const c = game.crown;
    if (
      game.player.x < c.x + c.w &&
      game.player.x + game.player.size > c.x &&
      game.player.y < c.y + c.h &&
      game.player.y + game.player.size > c.y
    ) {
      completeLevel();
    }
  }
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  for (const wall of game.walls) {
    ctx.fillStyle = "#ff69b4"; // pink walls
    ctx.fillRect(wall.x, wall.y, TILE, TILE);
  }
  ctx.fillStyle = "#fff";
  for (const s of game.symbols) {
    ctx.beginPath();
    ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
    ctx.fill();
  }
  if (game.crown) {
    ctx.fillStyle = "gold";
    ctx.fillRect(game.crown.x + 6, game.crown.y + 6, TILE - 12, TILE - 12);
  }
  ctx.fillStyle = "#0f0";
  ctx.fillRect(game.player.x, game.player.y, game.player.size, game.player.size);
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

function completeLevel() {
  currentLevel++;
  if (currentLevel < LEVELS.length) {
    loadLevel(currentLevel);
  } else {
    endScreen.style.display = 'flex';
  }
}

startGameBtn.onclick = () => {
  menuScreen.style.display = 'none';
  currentLevel = 0;
  loadLevel(currentLevel);
  loop();
};

window.addEventListener('keydown', e => keys[e.key] = true);
window.addEventListener('keyup', e => keys[e.key] = false);
</script>
</body>
</html>
